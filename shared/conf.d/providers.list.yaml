---
port: 3008
debug: false
migrate: true
truncate: true
dashboard: true
etcd:
  init_check: true
env:
  debug: true
  files:
  - ".env"
routes:
- route: "/github/stars"
  debug: true
  disabled: false
  extract_paths: true
  name: github-stars
  provider: github.com
  base_url: https://api.github.com
  url: "/users/{{username}}/starred?per_page=5&page=1&order=desc&direction=desc"
  examples:
    docs:
      desc: ListStarred lists all the repos starred by a user.
      link: https://developer.github.com/v3/activity/starring/#list-repositories-being-starred
    remote:
      desc: ''
      link: https://api.github.com/users/{{GITHUB_ACCOUNT}}/starred?per_page=5&page=1&order=desc&direction=desc
    local:
      desc: ''
      link: http://localhost:3000/github/search?query=dlib
  timeout: 3
  selector: json
  method: GET
  headers:
    Authorization: " token {{GITHUB_TOKEN}}"
    Accept: application/vnd.github.mercy-preview+json
  resp_headers_intercept:
  - Link
  - X-Github-Media-Type
  - X-Ratelimit-Limit
  - X-Ratelimit-Remaining
  - X-Ratelimit-Reset
  - Content-Length
  blocks:
    result:
      items: items
      details:
        name: name
        desc: description
        owner:
        - owner.avatar_url
        - owner.id
        - owner.login
        product: full_name
        topics: topics
- route: "/github/search"
  debug: true
  disabled: false
  extract_paths: true
  name: github-search
  provider: github.com
  base_url: https://api.github.com
  url: "/search/repositories?q={{query}}&per_page=3&page=1&order=desc&sort=stars"
  examples:
    remote:
      desc: ''
      link: https://api.github.com/search/repositories?q=dlib&per_page=1&page=1&order=desc&sort=stars
    local:
      desc: ''
      link: http://localhost:3000/github/search?query=dlib
  timeout: 3
  selector: json
  method: GET
  headers:
    Authorization: " token {{GITHUB_TOKEN}}"
    Accept: application/vnd.github.mercy-preview+json
  openapi:
    defs:
    - link: ''
      version: 3
  resp_headers_intercept:
  - X-Github-Media-Type
  - X-Ratelimit-Limit
  - X-Ratelimit-Remaining
  - X-Ratelimit-Reset
  - Content-Length
  blocks:
    result:
      items: items
      details:
        name: name
        desc: description
        owner:
        - owner.avatar_url
        - owner.id
        - owner.login
        product: full_name
        topics: topics
- route: "/github/notifications"
  debug: true
  disabled: false
  extract_paths: true
  name: github-notifications-rss
  provider: github.com
  base_url: https://github.com
  url: "/{{username}}.private.atom?token={{token}}"
  example: https://github.com/{{GITHUB_ACCOUNT}}.private.atom?token={{GITHUB_NOTIFICATION_TOKEN}}
  examples:
    remote:
      desc: ''
      link: https://github.com/{{GITHUB_ACCOUNT}}.private.atom?token={{GITHUB_NOTIFICATION_TOKEN}}
    local:
      desc: ''
      link: http://localhost:3000/github/notifications?token={{GITHUB_NOTIFICATION_TOKEN}}&username={{GITHUB_ACCOUNT}}
  timeout: 3
  selector: xml
  method: GET
  blocks:
    result:
      items: feed.entry
      details:
        title: title.#text
        type: title.-type
        author:
        - author.name
        - author.uri
        - author.email
- route: "/google/search"
  debug: true
  disabled: true
  name: google-search
  provider: google.com
  base_url: https://www.google.com
  url: "/search?q={{query}}"
  timeout: 10
  selector: css
  method: GET
  blocks:
    result:
      items: "#res div[class=g]"
      count: "#resultStats"
      details:
        title: h3 a
        url:
        - h3 a
        - "@href"
        - query-param(q)
    extra:
      items: "#brs .g-section-with-header div div, p"
      details:
        title: a
        url:
        - a
        - "@href"
- route: "/ccc-tv"
  debug: true
  disabled: true
  name: ccc-tv
  provider: media.ccc.de
  base_url: https://media.ccc.de
  url: "/search/?q={{query}}"
  method: GET
  timeout: 10
  selector: css
  blocks:
    result:
      items: div[class='container-fluid'] div[class='event-previews'] div[class='caption']
      count: span[class='sb_count']
      details:
        title: h4
        desc: h3 a
        url:
        - h3 a
        - "@href"
- route: "/golanglibs"
  debug: true
  strict_mode: true
  name: golanglibs
  provider: golanglibs.com
  base_url: https://golanglibs.com
  method: GET
  url: "/search?q={{query}}"
  timeout: 10
  selector: xpath
  blocks:
    result:
      strict_mode: true
      items: "/html/body/div[1]/div[3]/div[1]/div"
      details:
        title: div[2]/div/a
        desc: div[2]/div
        url:
        - div[2]/div/a
        - "@href"
- route: "/bitbucket"
  debug: true
  disabled: true
  name: bitbucket
  provider: bitbucket.org
  base_url: https://bitbucket.org
  url: "/repo/all/1?name={{query}}"
  method: GET
  timeout: 10
  selector: css
  headers:
    Accept: application/vnd.github.mercy-preview+json
  blocks:
    result:
      items: "#repositories li"
      count: span[class='sb_count']
      details:
        title: article[class='repo-summary'] h1 a[class='repo-link']
        desc: article, p
        url:
        - article[class='repo-summary'] a[class='repo-link']
        - "@href"
- route: "/archive.is"
  debug: true
  disabled: true
  name: arch linux wiki
  provider: archive.is
  base_url: https://archive.is
  method: GET
  url: "{{query}}"
  timeout: 10
  selector: css
  blocks:
    result:
      items: div[class='TEXT-BLOCK'] ul li
      count: span[class='sb_count']
      details:
        title: div[class='TEXT-BLOCK'] a
        desc: div span
        url:
        - div[class='TEXT-BLOCK'] a
        - "@href"
- route: "/archlinux/all"
  debug: true
  disabled: true
  name: arch linux wiki
  provider: archlinux.org
  method: GET
  base_url: https://wiki.archlinux.org
  url: "/index.php?title=Special:Search&offset=1&{{query}}"
  timeout: 10
  selector: css
  blocks:
    result:
      count: span[class='sb_count']
      items: "#mw-content-text div > ul[2] li"
      details:
        title: ".mw-search-result-heading a"
        desc: div span
        url:
        - div a
        - "@href"
- route: "/voat"
  debug: true
  disabled: true
  provider: searchvoat.co
  base_url: https://searchvoat.co
  url: "/?t={{query}}"
  method: GET
  timeout: 10
  selector: css
  blocks:
    result:
      count: span[class='sb_count']
      items: "#timeline table tr td"
      details:
        title: div[class='entry'] p a[class='title']
        desc: div[class='entry'] p span[class='domain']
        url:
        - div[@class='entry'] p a[class='title']
        - "@href"
- route: "/bing/news"
  debug: true
  base_url: https://www.bing.com
  provider: bing.com
  method: GET
  url: "/news/search?{{query}}&first=1"
  selector: css
  blocks:
    result:
      count: span[class='sb_count']
      items: "#algocore .newsitem"
      details:
        title: div[class=t_t] a
        image:
        - div[class=image] a img
        - "@src"
        desc: div[class=snippet]
        url:
        - div[class=t_t] a
        - "@href"
- route: "/bing"
  debug: true
  strict_mode: true
  base_url: https://www.bing.com
  provider: bing.com
  url: "/search?q={{query}}"
  selector: css
  method: GET
  blocks:
    result:
      count: span[class='sb_count']
      items: "#b_results li.b_algo, #b_results li.b_ans"
      details:
        title: li[class=b_algo] h2
        desc: div[class='b_caption'] p
        url:
        - li[class=b_algo] h2 a
        - "@href"
    extra:
      items: "#b_context li div ul li"
      details:
        title: li a
        url:
        - li a
        - "@href"
- route: "/google/play/apps"
  debug: true
  selector: css
  name: google play apps
  provider: google.com
  method: GET
  base_url: https://play.google.com
  url: "/store/search?q={{query}}&c=apps"
  blocks:
    result:
      items: div[class='id-card-list card-list two-cards'] div[class='details']
      count: "//span[@class='sb_count']"
      details:
        title: a[class='title']
        desc: div[class='subtitle-container'] a[class='subtitle']
        url:
        - a[class='title']
        - "@href"
- route: "/habrahabr"
  debug: true
  name: habrahabr
  base_url: https://habrahabr.ru
  provider: habrahabr.ru
  method: GET
  url: "/search/page1/?q={{query}}&target_type=posts&flow=&order_by=relevance"
  selector: xpath
  blocks:
    results:
      items: "//ul[contains(@class, 'content-list_posts')]/li"
      details:
        title: "//a[contains(@class, 'post__title_link')]"
        cat: "//ul[contains(@class, 'post__hubs')]"
        desc: "//div[contains(@class, 'post__text')]"
        url:
        - "//a[@class='post__title_link']/@href"
- route: "/google/play/movies"
  debug: true
  name: google play movies
  provider: google.com
  method: GET
  base_url: https://play.google.com
  url: "/store/search?q={{query}}&c=movies"
  selector: xpath
  blocks:
    movies:
      items: "//*[@id='body-content']/div/div/div[1]/div/div[1]/div/div[2]/div"
      details:
        title: "//a[@class='title']"
        cat: "//a[@class='subtitle subtitle-movie-category']"
        desc: "//a[@class='subtitle']"
        url:
        - "//a[@class='title']/@href"
    tv-shows:
      items: "//*[@id='body-content']/div/div/div[1]/div/div[2]/div/div[2]/div"
      details:
        title: "//a[@class='title']"
        cat: "//a[@class='subtitle subtitle-movie-category']"
        desc: "//a[@class='subtitle']"
        url:
        - "//a[@class='title']/@href"
    tv-episodes:
      items: "//*[@id='body-content']/div/div/div[1]/div/div[3]/div/div[2]/div"
      details:
        title: "//a[@class='title']"
        cat: "//a[@class='subtitle subtitle-movie-category']"
        desc: "//a[@class='subtitle']"
        url:
        - "//a[@class='title']/@href"
- route: "/google/play/music"
  debug: true
  name: google play music
  base_url: https://play.google.com
  provider: google.com
  method: GET
  url: "/store/search?q={{query}}&c=music"
  selector: xpath
  blocks:
    artists:
      items: "//*[@id='body-content']/div/div/div[1]/div/div[1]/div/div[2]/div"
      details:
        title: "//a[@class='title']"
        cat: "//a[@class='subtitle subtitle-movie-category']"
        desc: "//a[@class='subtitle']"
        url:
        - "//a[@class='title']/@href"
    albums:
      items: "//*[@id='body-content']/div/div/div[1]/div/div[2]/div/div[2]/div"
      details:
        title: "//a[@class='title']"
        cat: "//a[@class='subtitle subtitle-movie-category']"
        desc: "//a[@class='subtitle']"
        url:
        - "//a[@class='title']/@href"
    songs:
      items: "//*[@id='body-content']/div/div/div[1]/div/div[3]/div/div[2]/div"
      details:
        title: "//a[@class='title']"
        cat: "//a[@class='subtitle subtitle-movie-category']"
        desc: "//a[@class='subtitle']"
        url:
        - "//a[@class='title']/@href"
- route: "/google/scholar"
  debug: true
  selector: css
  provider: google.com
  name: Google Scholar
  method: GET
  base_url: https://scholar.google.com
  url: "/scholar?hl=en&as_sdt=0%2C5&as_vis=1&q={{query}}&btnG="
  blocks:
    result:
      items: "#gs_res_ccl_mid div"
      count: "//span[@class='sb_count']"
      details:
        title: "#gs_res_ccl_mid div[class=gs_ri] h3"
        desc: "#gs_res_ccl_mid div[class=gs_ri] div[class=gs_rs]"
        url:
        - "#gs_res_ccl_mid div[class=gs_ri] h3 a"
        - "@href"
    extra:
      items: "#gs_qsuggest ul li"
      details:
        title: li a
        url:
        - li a
        - "@href"
